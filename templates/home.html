{% extends 'layout.html'%}
{% block title %}
    IPSW Downloader
{% endblock title %}

{% block content %}

<div class="mt-3"> 
    <main role="main" class="container">
        <div class="jumbotron home-jumbo mx-auto">
            <div class="text-center"> 
                <h2 class=""> Select some devices, then hit <a href="#" id="download-button" class="btn btn-outline-danger btn-md disabled ml-2 mt-0" data-toggle="modal" data-target="#confirm-Modal" role="button" aria-disabled="true">Download</a></h2>
            </div>
        </div>
      </main>
</div>

    <div class="form-inline"> 
        <div class="row col-12 shadow-lg p-3 bg-white rounded">
            {% for device_type in data[0] %}
                <div class="table-wrapper-scroll-y my-custom-scrollbar col-md-4 ">
                    <table class="table table-bordered table-striped mb-0" id = "table-{{device_type}}">


                        <thead onclick="selectAll(this)" id = "table-header-{{device_type}}" class="text-center">
                            <tr>
                                <th colspan="2" scope="col">{{device_type}}</th>
                            </tr>
                        </thead>


                        <tbody id = "table-body-{{device_type}}">
                            <!-- {% if "iOS" in device_type %}  -->
                            <!-- iPhones -->
                                {% for device in data[1][::-1] %}
                                    <tr onclick="clickFunction(this, {{device}})">
                                        <td>{{device.0.0}} </td>
                                        <td> {{device.0.1}}</td>
                                    </tr>
                                {% endfor %}
                            <!-- {% elif "iPadOS" in device_type %} -->
                            <!-- iPads -->
                                {% for device in data[2][::-1]|list %}
                                <tr onclick="clickFunction(this, {{device}})">
                                        <td> {{device.0.0}} </td>
                                    </tr>
                                {% endfor %}
                            <!-- {% elif "Mac" in device_type%} -->
                            <!-- Macs and iPods -->
                                {% for device in data[3][::-1] %}
                                <tr onclick="clickFunction(this, {{device}})">
                                        <td colspan="2"> {{device.0.0}}</td>
                                    </tr>
                                {% endfor %}
                                {% for device in data[4][::-1] %}
                                <tr onclick="clickFunction(this, {{device}})">
                                        <td> {{device.0.0}}</td>
                                        <td> {{device.0.1}}</td>
                                    </tr>
                                {% endfor %}
                            <!-- {% endif %} -->
                        </tbody>
                    </table>
                </div>
            {% endfor %}

            <a href="#" id="clear-button" class="btn btn-dark btn-md rounded-pill d-none border border-light mx-auto mt-3" role="button" aria-disabled="true">Clear All</a>

            <!-- Bootstrap Modal for Pop-up -->
            <div class="modal fade" id="confirm-Modal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="confirmModalLabel">Before you download...</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body text-center" id="modal-body-id">
                        <h5 id="modal-output"></h5>
                        <table id="modal-table" class="table table-sm">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Device Name</th>
                                    <th scope="col">Latest Firmware</th>
                                </tr>
                            </thead>
                            <tbody id = "modal-table-body">
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer" id = "modal-table-footer">
                        <button type="button" class="btn btn-outline-dark mr-auto d-none" id="preset-button" role="button">Create Preset</button>
                        
                        <div class="input-group mr-auto d-none" id="preset-form">
                            <input type="text" class="form-control preset-name" id="preset-name" placeholder="Preset Name" aria-label="Name" aria-describedby="basic-addon2" required>
                            <div class="input-group-append">
                              <button class="btn btn-outline-secondary" id="preset-add" type="button">+</button>
                            </div>
                        </div>

                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="initDownload()">Download!</button>
                    </div>
                </div>
                </div>
            </div>

        </div> 
    </div>


    <div class="text-center"> 
        <p class="pt-3 "> Check the <a href="/about"> About Page </a> for help!</p>
    </div>




        

          

{% endblock content %}

{% block js %} 
<script src="{{ url_for('static', filename='js/home.js') }}"></script>
{% endblock js%}

